<div class="wrapper">
    <table class="table" class="table-wrapper">
        <tr class="table-header">
            <th class="description-header">
                <input name="all" type="checkbox" [checked]="isSelectedAll" (click)="addAllSelectedList($event)" />
                Mô tả Link
            </th>
            <th>Link site cũ</th>
            <th>Link site mới</th>
        </tr>
        <tr
            *ngFor="let item of availableListLink | slice : (page - 1) * pageSize : (page - 1) * pageSize + pageSize"
            class="table-content"
        >
            <td class="description-col">
                <div style="display: flex; align-items: center">
                    <input type="checkbox" (click)="addToSelectedList(item.id)" [checked]="isSelectedAll" />
                    <p>{{ item.description }}</p>
                </div>
            </td>
            <td class="old-col">{{ item.old_link }}</td>
            <td class="new-col">
                <p>{{ item.new_link }}</p>
            </td>
            <td class="see-more">
                <div class="show-menu-btn" (click)="setActive(item.id)" [class.selected]="item.id === activeButton">
                    <div class="icon">
                        <svg
                            className="see-more-icon"
                            width="13px"
                            height="3px"
                            stroke="currentColor"
                            fill="currentColor"
                            viewBox="0 0 16 3"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M2 3C2.82843 3 3.5 2.32843 3.5 1.5C3.5 0.671573 2.82843 0 2 0C1.17157 0 0.5 0.671573 0.5 1.5C0.5 2.32843 1.17157 3 2 3Z"
                                fill="currentColor"
                            />
                            <path
                                d="M8 3C8.82843 3 9.5 2.32843 9.5 1.5C9.5 0.671573 8.82843 0 8 0C7.17157 0 6.5 0.671573 6.5 1.5C6.5 2.32843 7.17157 3 8 3Z"
                                fill="currentColor"
                            />
                            <path
                                d="M14 3C14.8284 3 15.5 2.32843 15.5 1.5C15.5 0.671573 14.8284 0 14 0C13.1716 0 12.5 0.671573 12.5 1.5C12.5 2.32843 13.1716 3 14 3Z"
                                fill="currentColor"
                            />
                            />
                        </svg>
                    </div>
                </div>
                <div [hidden]="item.id !== activeButton" class="sub-menu">
                    <div class="edit-wrapper" (click)="handleOpenForm()">
                        <div class="icon">
                            <svg
                                width="13"
                                height="14"
                                viewBox="0 0 13 14"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M3.03852e-05 13.9999V10.8889C-0.0138189 10.4607 0.100008 10.0382 0.32703 9.67489L9.24303 0.340891C9.34396 0.23314 9.46592 0.147248 9.60138 0.0885284C9.73683 0.0298089 9.8829 -0.000488281 10.0305 -0.000488281C10.1782 -0.000488281 10.3242 0.0298089 10.4597 0.0885284C10.5951 0.147248 10.7171 0.23314 10.818 0.340891L12.675 2.28489C12.884 2.50861 13.0002 2.80329 13.0002 3.10939C13.0002 3.41549 12.884 3.71018 12.675 3.93389L4.08603 13.2219C3.76227 13.4606 3.37403 13.5962 2.97203 13.6109L3.03852e-05 13.9999ZM10.03 1.16589L1.11403 10.4999L2.97203 12.4449L11.887 3.10989L10.03 1.16589Z"
                                    fill="white"
                                />
                            </svg>
                        </div>
                        <p class="text">Chỉnh sửa</p>
                    </div>
                    <div class="delete-mapping" (click)="handleDeleteLink(item.id)">
                        <div class="icon">
                            <svg
                                width="17"
                                height="18"
                                viewBox="0 0 17 18"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M13.5 17.8768H3.11497C2.80677 17.8739 2.51231 17.7489 2.29617 17.5292C2.08002 17.3095 1.95983 17.013 1.96197 16.7048V4.59282H1.57697C1.42155 4.59282 1.2725 4.53108 1.1626 4.42118C1.05271 4.31129 0.990967 4.16224 0.990967 4.00682C0.990967 3.8514 1.05271 3.70235 1.1626 3.59245C1.2725 3.48256 1.42155 3.42082 1.57697 3.42082H4.87697C5.1529 2.67583 5.64927 2.0326 6.29997 1.57682C6.94406 1.1236 7.7124 0.880371 8.49997 0.880371C9.28753 0.880371 10.0559 1.1236 10.7 1.57682C11.3503 2.03338 11.846 2.67733 12.121 3.42282H15.421C15.5764 3.42282 15.7254 3.48456 15.8353 3.59445C15.9452 3.70435 16.007 3.8534 16.007 4.00882C16.007 4.16424 15.9452 4.31329 15.8353 4.42318C15.7254 4.53308 15.5764 4.59482 15.421 4.59482H14.651V16.7048C14.6531 17.0127 14.5332 17.3088 14.3175 17.5285C14.1018 17.7481 13.8078 17.8734 13.5 17.8768ZM11.385 9.47682C11.5392 9.47814 11.6865 9.54059 11.7947 9.65046C11.9029 9.76033 11.963 9.90863 11.962 10.0628V16.7048H13.5V4.59282H3.11497V16.7048H4.65397V10.0628C4.65397 9.98705 4.66889 9.91201 4.69789 9.84201C4.72689 9.77201 4.76939 9.7084 4.82297 9.65482C4.87655 9.60124 4.94015 9.55874 5.01016 9.52974C5.08016 9.50074 5.15519 9.48582 5.23097 9.48582C5.30674 9.48582 5.38177 9.50074 5.45178 9.52974C5.52178 9.55874 5.58539 9.60124 5.63897 9.65482C5.69255 9.7084 5.73505 9.77201 5.76405 9.84201C5.79304 9.91201 5.80797 9.98705 5.80797 10.0628V16.7048H7.73097V7.71782C7.73097 7.56479 7.79176 7.41803 7.89997 7.30982C8.00817 7.20161 8.15494 7.14082 8.30797 7.14082C8.461 7.14082 8.60776 7.20161 8.71597 7.30982C8.82418 7.41803 8.88497 7.56479 8.88497 7.71782V16.7038H10.808V10.0628C10.8069 9.90863 10.8671 9.76033 10.9752 9.65046C11.0834 9.54059 11.2308 9.47814 11.385 9.47682ZM8.49997 2.05282C8.00665 2.00858 7.51158 2.11582 7.0808 2.36025C6.65002 2.60467 6.30402 2.97465 6.08897 3.42082H10.911C10.6919 2.97786 10.3451 2.61075 9.91537 2.36689C9.48558 2.12303 8.99256 2.01363 8.49997 2.05282Z"
                                    fill="white"
                                />
                            </svg>
                        </div>
                        <p class="text">Hủy mapping link</p>
                    </div>
                </div>
            </td>
        </tr>
    </table>

    <div [hidden]="!isShowMappingPopup" class="handle-mapping-wrapper">
        <div class="selected-quantity">
            <p class="quantity">{{ selectedListLink.length }}</p>
            <p class="text">Đã chọn</p>
        </div>
        <div class="delete-wrapper" (click)="handleDeleteMapping()">
            <div class="icon">
                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M13.5 16.9964H3.11497C2.80677 16.9935 2.51231 16.8685 2.29617 16.6488C2.08002 16.4291 1.95983 16.1326 1.96197 15.8244V3.71245H1.57697C1.42155 3.71245 1.2725 3.65071 1.1626 3.54081C1.05271 3.43092 0.990967 3.28186 0.990967 3.12645C0.990967 2.97103 1.05271 2.82198 1.1626 2.71208C1.2725 2.60219 1.42155 2.54045 1.57697 2.54045H4.87697C5.1529 1.79546 5.64927 1.15223 6.29997 0.696448C6.94406 0.243233 7.7124 0 8.49997 0C9.28753 0 10.0559 0.243233 10.7 0.696448C11.3503 1.15301 11.846 1.79696 12.121 2.54245H15.421C15.5764 2.54245 15.7254 2.60419 15.8353 2.71408C15.9452 2.82398 16.007 2.97303 16.007 3.12845C16.007 3.28386 15.9452 3.43292 15.8353 3.54281C15.7254 3.65271 15.5764 3.71445 15.421 3.71445H14.651V15.8244C14.6531 16.1323 14.5332 16.4285 14.3175 16.6481C14.1018 16.8678 13.8078 16.993 13.5 16.9964ZM11.385 8.59645C11.5392 8.59777 11.6865 8.66022 11.7947 8.77009C11.9029 8.87996 11.963 9.02826 11.962 9.18245V15.8244H13.5V3.71245H3.11497V15.8244H4.65397V9.18245C4.65397 9.10668 4.66889 9.03164 4.69789 8.96164C4.72689 8.89163 4.76939 8.82803 4.82297 8.77445C4.87655 8.72087 4.94015 8.67837 5.01016 8.64937C5.08016 8.62037 5.15519 8.60545 5.23097 8.60545C5.30674 8.60545 5.38177 8.62037 5.45178 8.64937C5.52178 8.67837 5.58539 8.72087 5.63897 8.77445C5.69255 8.82803 5.73505 8.89163 5.76405 8.96164C5.79304 9.03164 5.80797 9.10668 5.80797 9.18245V15.8244H7.73097V6.83745C7.73097 6.68442 7.79176 6.53766 7.89997 6.42945C8.00817 6.32124 8.15494 6.26045 8.30797 6.26045C8.461 6.26045 8.60776 6.32124 8.71597 6.42945C8.82418 6.53766 8.88497 6.68442 8.88497 6.83745V15.8234H10.808V9.18245C10.8069 9.02826 10.8671 8.87996 10.9752 8.77009C11.0834 8.66022 11.2308 8.59777 11.385 8.59645ZM8.49997 1.17245C8.00665 1.12821 7.51158 1.23545 7.0808 1.47988C6.65002 1.7243 6.30402 2.09428 6.08897 2.54045H10.911C10.6919 2.09749 10.3451 1.73037 9.91537 1.48652C9.48558 1.24266 8.99256 1.13326 8.49997 1.17245Z"
                        fill="#FD7676"
                    />
                </svg>
            </div>
            <p class="delete-text">Hủy mapping link</p>
        </div>
        <div class="close-action">
            <div class="close-icon" (click)="handleCloseMapping()">
                <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M14.255 15.7211L8.00004 9.46611L1.74504 15.7211C1.55066 15.9062 1.2908 16.0065 1.0225 16.0002C0.754207 15.9938 0.499375 15.8812 0.314007 15.6872C0.11994 15.5018 0.0073931 15.247 0.00101849 14.9787C-0.00535612 14.7104 0.0950267 14.4505 0.280071 14.2561L6.53508 8.00114L0.280071 1.74613C0.188388 1.64989 0.116507 1.53653 0.0686454 1.41252C0.020784 1.28851 -0.00210965 1.15624 0.00114056 1.02336C0.00439077 0.89047 0.0338216 0.759626 0.0876884 0.638103C0.141555 0.516579 0.218826 0.406755 0.315105 0.315105C0.406823 0.218893 0.516545 0.141711 0.638103 0.0879317C0.759662 0.034152 0.890593 0.0049074 1.02348 0.00175008C1.15637 -0.00140725 1.28866 0.0216752 1.41264 0.0696212C1.53662 0.117567 1.64983 0.189422 1.74601 0.281169L8.00102 6.53617L14.256 0.281169C14.4504 0.0961245 14.7103 -0.00425832 14.9786 0.00211629C15.2469 0.00849089 15.5017 0.121038 15.6871 0.315105C15.8811 0.500473 15.9937 0.755305 16 1.0236C16.0064 1.2919 15.9062 1.55176 15.7211 1.74613L9.46611 8.00114L15.7211 14.2561C15.8129 14.3523 15.8847 14.4657 15.9327 14.5896C15.9806 14.7136 16.0037 14.8458 16.0005 14.9787C15.9974 15.1116 15.968 15.2425 15.9142 15.3641C15.8604 15.4856 15.7833 15.5955 15.6871 15.6872C15.5893 15.7861 15.4731 15.8647 15.3449 15.9186C15.2167 15.9725 15.0792 16.0006 14.9401 16.0011C14.8131 16.002 14.6872 15.9777 14.5696 15.9296C14.4521 15.8815 14.3451 15.8107 14.255 15.7211Z"
                        fill="#959DB3"
                    />
                </svg>
            </div>
        </div>
    </div>
    <app-formupdate
        [hidden]="!isShowEditForm"
        [isShowEditForm]="isShowEditForm"
        (handleCloseEditForm)="handleCloseEditForm()"
        [selectedLink]="selectedLink"
    ></app-formupdate>

    <div class="pagination-wrapper">
        <div class="total-pages">
            <p class="show-text">Hiển thị mỗi trang</p>
            <div class="quantity-page">
                <ul class="select-list">
                    {{
                        pageSize
                    }}
                    <div class="options" [class.show]="isShowPageSizeController">
                        <li *ngFor="let option of pageSizeSelect" (click)="handleGetValueSelect(option)">
                            {{ option }}
                        </li>
                    </div>
                </ul>
                <div class="icon" (click)="handleShowPageSizeController()">
                    <div [hidden]="isShowPageSizeController">
                        <svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.42203 0.296442C7.37672 0.261755 7.32855 0.230978 7.27803 0.204442C7.22292 0.160999 7.16363 0.123146 7.10103 0.0914424C7.03593 0.0707954 6.96893 0.0567251 6.90103 0.0494424C6.77279 0.00695669 6.63427 0.00695669 6.50603 0.0494424C6.43813 0.0567251 6.37113 0.0707954 6.30603 0.0914424C6.24377 0.123204 6.18482 0.161055 6.13003 0.204442C6.07813 0.230779 6.02861 0.261561 5.98203 0.296442V0.296442L0.699029 5.93744C0.518806 6.14407 0.425836 6.41259 0.439711 6.68642C0.453587 6.96025 0.573225 7.218 0.773412 7.40535C0.973599 7.59271 1.2387 7.69503 1.51285 7.69075C1.787 7.68648 2.04878 7.57594 2.24303 7.38244L6.76303 2.56644L11.283 7.38244C11.4773 7.57594 11.7391 7.68648 12.0132 7.69075C12.2874 7.69503 12.5525 7.59271 12.7526 7.40535C12.9528 7.218 13.0725 6.96025 13.0863 6.68642C13.1002 6.41259 13.0073 6.14407 12.827 5.93744L7.42203 0.296442Z"
                                fill="#959DB3"
                            />
                        </svg>
                    </div>
                    <div [hidden]="!isShowPageSizeController">
                        <svg
                            [hidden]=""
                            width="14"
                            height="8"
                            viewBox="0 0 14 8"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M6.10422 7.41202C6.14953 7.44671 6.1977 7.47749 6.24822 7.50402C6.30332 7.54747 6.36261 7.58532 6.42522 7.61702C6.49031 7.63767 6.55731 7.65174 6.62522 7.65902C6.75345 7.70151 6.89198 7.70151 7.02022 7.65902C7.08812 7.65174 7.15512 7.63767 7.22022 7.61702C7.28247 7.58526 7.34142 7.54741 7.39622 7.50402C7.44811 7.47769 7.49763 7.4469 7.54422 7.41202L12.8272 1.77102C13.0074 1.5644 13.1004 1.29587 13.0865 1.02204C13.0727 0.748212 12.953 0.490462 12.7528 0.303111C12.5526 0.115759 12.2875 0.0134392 12.0134 0.0177135C11.7392 0.0219879 11.4775 0.132523 11.2832 0.326024L6.76322 5.14202L2.24322 0.326024C2.04897 0.132523 1.78718 0.0219879 1.51303 0.0177135C1.23889 0.0134392 0.973786 0.115759 0.773599 0.303111C0.573411 0.490462 0.453773 0.748212 0.439898 1.02204C0.426022 1.29587 0.518992 1.5644 0.699216 1.77102L6.10422 7.41202Z"
                                fill="#959DB3"
                            />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="paginate-controller">
            <button class="first-page" (click)="handleBackToFirst()">Đầu</button>
            <ngb-pagination
                [pageSize]="pageSize"
                (pageChange)="page = $event; $event === 1 ? (activeButton = -1) : null"
                [collectionSize]="availableListLink.length"
                [(page)]="page"
            >
                <ng-template class="page-change prev-btn" ngbPaginationPrevious>
                    <svg width="8" height="13" viewBox="0 0 8 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            opacity="0.4"
                            d="M0.279047 5.6821C0.24436 5.72741 0.213583 5.77558 0.187047 5.8261C0.143604 5.8812 0.105751 5.9405 0.0740474 6.0031C0.0534004 6.06819 0.0393301 6.13519 0.0320474 6.2031C-0.0104383 6.33134 -0.0104383 6.46986 0.0320474 6.5981C0.0393301 6.666 0.0534004 6.733 0.0740474 6.7981C0.105809 6.86035 0.14366 6.91931 0.187047 6.9741C0.213384 7.02599 0.244166 7.07551 0.279047 7.1221L5.92005 12.4051C6.12668 12.5853 6.3952 12.6783 6.66903 12.6644C6.94286 12.6505 7.20061 12.5309 7.38796 12.3307C7.57531 12.1305 7.67763 11.8654 7.67336 11.5913C7.66908 11.3171 7.55855 11.0553 7.36505 10.8611L2.54905 6.3411L7.36505 1.8211C7.55855 1.62685 7.66908 1.36506 7.67336 1.09092C7.67763 0.816768 7.57531 0.551667 7.38796 0.35148C7.20061 0.151292 6.94286 0.0316544 6.66903 0.0177784C6.3952 0.00390244 6.12668 0.0968733 5.92005 0.277097L0.279047 5.6821Z"
                            fill="#959DB3"
                        />
                    </svg>
                </ng-template>
                <ng-template class="page-change next-btn" ngbPaginationNext>
                    <svg width="8" height="13" viewBox="0 0 8 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M7.41089 7.00003C7.44558 6.95472 7.47636 6.90655 7.50289 6.85603C7.54634 6.80093 7.58419 6.74163 7.61589 6.67903C7.63654 6.61394 7.65061 6.54694 7.65789 6.47903C7.70038 6.35079 7.70038 6.21227 7.65789 6.08403C7.65061 6.01613 7.63654 5.94913 7.61589 5.88403C7.58413 5.82178 7.54628 5.76282 7.50289 5.70803C7.47656 5.65614 7.44578 5.60662 7.41089 5.56003L1.76989 0.277032C1.56327 0.0968088 1.29474 0.00383869 1.02091 0.0177143C0.747083 0.0315899 0.489333 0.151228 0.301981 0.351415C0.11463 0.551602 0.01231 0.816704 0.0165844 1.09085C0.0208588 1.365 0.131393 1.62678 0.324894 1.82103L5.14089 6.34103L0.324894 10.861C0.131393 11.0553 0.0208588 11.3171 0.0165844 11.5912C0.01231 11.8654 0.11463 12.1305 0.301981 12.3306C0.489333 12.5308 0.747083 12.6505 1.02091 12.6644C1.29474 12.6782 1.56327 12.5853 1.76989 12.405L7.41089 7.00003Z"
                            fill="#959DB3"
                        />
                    </svg>
                </ng-template>
            </ngb-pagination>
            <button class="last-page" (click)="handleBackToLast()">Cuối</button>
        </div>
    </div>
</div>
